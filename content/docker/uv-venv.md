---
title: "Python Ã— Docker Ã— uvã§å†ç¾æ€§ã®ã‚ã‚‹ç’°å¢ƒæ§‹ç¯‰ã‚’å®Ÿç¾ã™ã‚‹"
summary: "Pythoné–‹ç™ºã§ã‚ˆãå•é¡Œã«ãªã‚‹ .venv ã¨ Docker ã®é–¢ä¿‚ã‚’æ•´ç†ã—ã€uv sync ã‚’ä½¿ã£ã¦å®‰å…¨ã‹ã¤å†ç¾æ€§ã®ã‚ã‚‹ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹æ–¹æ³•ã‚’è§£èª¬ã—ã¾ã™ã€‚"
tags: ["Python", "Docker", "uv", "é–‹ç™ºç’°å¢ƒ", "å†ç¾æ€§"]
---

## ðŸ§­ 1. ã¯ã˜ã‚ã«

Python ã§é–‹ç™ºã—ã¦ã„ã‚‹ã¨ã€**`.venv` ã®æ‰±ã„ã«è¿·ã†**ã“ã¨ã£ã¦ã‚ã‚Šã¾ã›ã‚“ã‹ï¼Ÿ
ç‰¹ã« Docker ã¨çµ„ã¿åˆã‚ã›ãŸã¨ãã€
ã€Œãƒ­ãƒ¼ã‚«ãƒ«ã® `.venv` ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿã€ã€Œã‚³ãƒ³ãƒ†ãƒŠå†…ã§ä½œã‚‹ã¹ãã‹ï¼Ÿã€
ã¨ã„ã£ãŸå•é¡Œã«ä¸€åº¦ã¯ã¶ã¤ã‹ã‚‹ã¨æ€ã„ã¾ã™ã€‚

ä¸€è¦‹ã©ã¡ã‚‰ã§ã‚‚å‹•ãã‚ˆã†ã«è¦‹ãˆã¾ã™ãŒã€å®Ÿéš›ã«ã¯ **ãƒ“ãƒ«ãƒ‰ã®å†ç¾æ€§ãŒå¤§ããå´©ã‚Œã‚‹**ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚
ãƒ›ã‚¹ãƒˆï¼ˆmacOSãªã©ï¼‰ã¨ã‚³ãƒ³ãƒ†ãƒŠï¼ˆLinuxï¼‰ã§ã¯ Python ã®ãƒã‚¤ãƒŠãƒªä¾å­˜é–¢ä¿‚ãŒç•°ãªã‚‹ãŸã‚ã€
åŒã˜ `.venv` ã‚’å…±æœ‰ã—ã¦ã—ã¾ã†ã¨ã€ŒImportErrorã€ã€ŒlibãŒè¦‹ã¤ã‹ã‚‰ãªã„ã€ãªã©ã®å¾®å¦™ãªä¸å…·åˆã‚’ç”Ÿã¿ã¾ã™ã€‚

---

ã“ã®å•é¡Œã¯ Node.js ã§ã¯ã‚ã¾ã‚Šèµ·ã“ã‚Šã¾ã›ã‚“ã€‚
`node_modules` ã¯ OS ã«ä¾å­˜ã—ãªã„ JavaScript ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç¾¤ã§ã‚ã‚Šã€
`npm install` ã‚„ `pnpm install` ã¯å¸¸ã« 0 ã‹ã‚‰å†ç¾çš„ã«æ§‹ç¯‰ã•ã‚Œã‚‹è¨­è¨ˆã§ã™ã€‚
ä¸€æ–¹ã€Python ã® `.venv` ã¯ **ãƒ›ã‚¹ãƒˆã®Pythonå®Ÿè¡Œç’°å¢ƒã‚’åŸºç›¤ã«æ§‹ç¯‰ã•ã‚Œã‚‹**ãŸã‚ã€
ç’°å¢ƒã‚’ã¾ãŸã„ã§ä½¿ã†ã¨ãã®å‰æãŒå´©ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚

---

ã“ã®è¨˜äº‹ã§ã¯ã€ã“ã®å•é¡Œã‚’æ ¹æœ¬ã‹ã‚‰æ•´ç†ã—ãªãŒã‚‰ã€

- Docker ã¨ `.venv` ã®æ§‹é€ çš„ãªé–¢ä¿‚
- `uv sync --frozen` ã‚’ä½¿ã£ãŸå†ç¾æ€§ã®ã‚ã‚‹æ§‹ç¯‰æ–¹æ³•
- `.dockerignore` ã«ã‚ˆã‚‹æœ€å°ãƒ»å®‰å…¨ãªè§£æ±ºç­–

ã‚’é †ã«ç´¹ä»‹ã—ã¾ã™ã€‚

---

æ¬¡ç« ã§ã¯ã¾ãšã€**Dockerã¨venvã®æ§‹é€ çš„ãªè¡çª**ã«ã¤ã„ã¦æŽ˜ã‚Šä¸‹ã’ã¾ã™ã€‚
ã€ŒãªãœNode.jsã§ã¯å‹•ãã®ã«Pythonã§ã¯å£Šã‚Œã‚‹ã®ã‹ï¼Ÿã€
ã“ã®ç–‘å•ã‚’æ•´ç†ã™ã‚‹ã“ã¨ã§ã€ç’°å¢ƒæ§‹ç¯‰ã®ç†è§£ãŒä¸€æ®µæ·±ã¾ã‚Šã¾ã™ã€‚

---

## 2. Docker ã¨ venv ã®æ§‹é€ çš„ãªå•é¡Œ

Python ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ä¾å­˜é–¢ä¿‚ã‚’åˆ†é›¢ã™ã‚‹ãŸã‚ã« **`venv`ï¼ˆä»®æƒ³ç’°å¢ƒï¼‰** ã‚’ä½¿ã†ã®ãŒä¸€èˆ¬çš„ã§ã™ã€‚
ä¸€æ–¹ã€Docker ã‚‚ã€Œç’°å¢ƒã®éš”é›¢ã€ã‚’ç›®çš„ã¨ã™ã‚‹ä»•çµ„ã¿ã§ã‚ã‚‹ãŸã‚ã€**`venv` ã¨ Docker ãŒé‡è¤‡ã—ã¦ç’°å¢ƒã‚’ç®¡ç†ã—ã‚ˆã†ã¨ã™ã‚‹** çŠ¶æ³ãŒã‚ˆãèµ·ã“ã‚Šã¾ã™ã€‚

ã“ã®ç« ã§ã¯ã€ãªãœ `.venv` ãŒ Docker ã¨ç›¸æ€§ãŒæ‚ªã„ã®ã‹ã‚’æ§‹é€ çš„ã«æ•´ç†ã—ã¾ã™ã€‚

---

### ðŸ”¹ COPY ã¨ Volume ã®é•ã„

ã¾ãšå‰æã¨ã—ã¦ã€**`COPY` ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒ›ã‚¹ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã¸ã‚³ãƒ”ãƒ¼**ã—ã€
**`volume`ï¼ˆãƒœãƒªãƒ¥ãƒ¼ãƒ ï¼‰ã¯å®Ÿè¡Œæ™‚ã«ãƒ›ã‚¹ãƒˆã‚„åŒ¿åé ˜åŸŸã‚’ã‚³ãƒ³ãƒ†ãƒŠã¸ãƒžã‚¦ãƒ³ãƒˆ**ã™ã‚‹ä»•çµ„ã¿ã§ã™ã€‚

```dockerfile
# COPYï¼šãƒ“ãƒ«ãƒ‰æ™‚ã«ãƒ›ã‚¹ãƒˆ â†’ ã‚¤ãƒ¡ãƒ¼ã‚¸
COPY backend/ .

# volumesï¼šå®Ÿè¡Œæ™‚ã«ãƒ›ã‚¹ãƒˆ or åŒ¿åé ˜åŸŸ â†’ ã‚³ãƒ³ãƒ†ãƒŠ
volumes:
  - ../backend:/app
  - /app/__pycache__
```

ã¤ã¾ã‚Šã€ãƒ“ãƒ«ãƒ‰æ™‚ç‚¹ã§ `.venv` ãŒãƒ›ã‚¹ãƒˆã«å­˜åœ¨ã™ã‚‹ã¨ã€
**`COPY` ã«ã‚ˆã£ã¦ãã®ã¾ã¾ã‚¤ãƒ¡ãƒ¼ã‚¸å†…éƒ¨ã«å–ã‚Šè¾¼ã¾ã‚Œã¦ã—ã¾ã†** ã¨ã„ã†ã®ãŒæœ¬è³ªçš„ãªå•é¡Œã§ã™ã€‚

---

### ðŸ”¹ åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã¨ãƒã‚¤ãƒ³ãƒ‰ãƒžã‚¦ãƒ³ãƒˆã®é•ã„

- **ãƒã‚¤ãƒ³ãƒ‰ãƒžã‚¦ãƒ³ãƒˆ**ï¼š`../backend:/app` ã®ã‚ˆã†ã«ã€ãƒ›ã‚¹ãƒˆå´ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ç›´æŽ¥ã‚³ãƒ³ãƒ†ãƒŠã«åŒæœŸã€‚
  â†’ é–‹ç™ºæ™‚ã«ã¯ä¾¿åˆ©ã ãŒã€ãƒ›ã‚¹ãƒˆã® `.venv` ãªã© OS ä¾å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã¾ã§å¼•ããšã‚Šè¾¼ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚

- **åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ **ï¼š`/app/.venv` ã®ã‚ˆã†ã«ã€åå‰ã®ãªã„ä¸€æ™‚é ˜åŸŸã‚’DockerãŒè‡ªå‹•ç”Ÿæˆã€‚
  â†’ ã‚³ãƒ³ãƒ†ãƒŠã”ã¨ã«åˆ†é›¢ã•ã‚Œã‚‹ãŸã‚ã€ãƒ›ã‚¹ãƒˆã¨ã®ç›´æŽ¥åŒæœŸã¯è¡Œã‚ã‚Œãªã„ã€‚

ä¸€è¦‹ã™ã‚‹ã¨åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã®ã»ã†ãŒå®‰å…¨ãã†ã§ã™ãŒã€
å®Ÿéš›ã«ã¯ **ã€Œãƒ“ãƒ«ãƒ‰æ™‚ç‚¹ã§ã™ã§ã« .venv ãŒ COPY ã•ã‚Œã¦ã„ã‚‹ã€** ãŸã‚ã€
ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã§åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’ä½¿ã£ã¦ã‚‚ `.venv` ã®æ··å…¥ã‚’é˜²ã’ãªã„ã®ã§ã™ã€‚

---

### ðŸ”¹ ãªãœ .venv ã‚’ãƒžã‚¦ãƒ³ãƒˆã™ã‚‹ã¨å±é™ºãªã®ã‹

`.venv` ã¯ OS ã‚„ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ä¾å­˜ã™ã‚‹ãƒã‚¤ãƒ†ã‚£ãƒ–ãƒã‚¤ãƒŠãƒªã‚’å«ã¿ã¾ã™ã€‚
ãŸã¨ãˆã° macOS ä¸Šã§ä½œæˆã•ã‚ŒãŸä»®æƒ³ç’°å¢ƒã‚’ Linux ã‚³ãƒ³ãƒ†ãƒŠã«ãƒžã‚¦ãƒ³ãƒˆã™ã‚‹ã¨ã€
ãƒªãƒ³ã‚¯å…ˆã® `.so`ï¼ˆå…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰ãŒå¯¾å¿œã—ã¦ãŠã‚‰ãšã€æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

```bash
ImportError: /app/.venv/lib/python3.13/site-packages/psycopg2/_psycopg.so: ELF load command address/offset not properly aligned
```

ã“ã®ã‚ˆã†ã«ã€**ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã® `.venv` ãŒæ··ã–ã‚‹ã¨å†ç¾æ€§ã‚’å¤±ã†**ãŸã‚ã€
Docker ç’°å¢ƒã§ã¯ `.venv` ã‚’ã‚³ãƒ”ãƒ¼ãƒ»ãƒžã‚¦ãƒ³ãƒˆã—ãªã„ã®ãŒåŽŸå‰‡ã§ã™ã€‚

---

### ðŸ”¹ .dockerignore ãŒæžœãŸã™æœ¬å½“ã®å½¹å‰²

ã“ã®å•é¡Œã‚’æ ¹æœ¬ã‹ã‚‰é˜²ãã«ã¯ã€**ãƒ“ãƒ«ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã« `.venv` ã‚’å«ã‚ãªã„**ã“ã¨ã§ã™ã€‚
Dockerfile ã®è¨­è¨ˆã‚„ volume è¨­å®šã‚’ã©ã‚Œã ã‘å·¥å¤«ã—ã¦ã‚‚ã€
ãƒ›ã‚¹ãƒˆå´ã‹ã‚‰ `.venv` ãŒé€ä¿¡ã•ã‚Œã‚Œã°å•é¡Œã¯ç™ºç”Ÿã—ã¾ã™ã€‚

ãã“ã§ä½¿ã†ã®ãŒ `.dockerignore`ï¼š

```bash
# .dockerignore
backend/.venv
```

ã“ã†ã—ã¦ãŠãã¨ã€`docker build` æ™‚ã« `.venv` ãŒ **é€ä¿¡å¯¾è±¡ã‹ã‚‰å®Œå…¨ã«é™¤å¤–** ã•ã‚Œã€
ã‚¤ãƒ¡ãƒ¼ã‚¸ã«æ··å…¥ã™ã‚‹ãƒªã‚¹ã‚¯ã‚’ã‚¼ãƒ­ã«ã§ãã¾ã™ã€‚
ã“ã‚ŒãŒæœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ã§ç¢ºå®Ÿãªå¯¾ç­–ã§ã™ã€‚

---

âœ… **ã¾ã¨ã‚**

- `COPY` ã¯ãƒ“ãƒ«ãƒ‰æ™‚ç‚¹ã§ `.venv` ã‚’æŒã¡è¾¼ã‚€å¯èƒ½æ€§ãŒã‚ã‚‹
- åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯å®Ÿè¡Œæ™‚ã®åŒæœŸé˜²æ­¢ã«ã¯æœ‰åŠ¹ã ãŒã€ãƒ“ãƒ«ãƒ‰æ™‚ç‚¹ã§ã¯ç„¡åŠ›
- `.venv` ã¯ OS ä¾å­˜ã®ãŸã‚ã€ãƒžã‚¦ãƒ³ãƒˆã™ã‚‹ã¨å†ç¾æ€§ã‚’å¤±ã†
- `.dockerignore` ã«è¿½åŠ ã—ã¦ãŠãã®ãŒæœ€ã‚‚ç¢ºå®Ÿãªé˜²å¾¡ç­–

---

## 3. uv ã®ä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹

`uv` ã¯ã€Python ã®ä¾å­˜é–¢ä¿‚ã‚’**å®£è¨€çš„ã«ãƒ»å†ç¾æ€§é«˜ã**ç®¡ç†ã™ã‚‹ãŸã‚ã®æ¬¡ä¸–ä»£ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚
`pip` ã‚„ `pipenv` ã¨ç•°ãªã‚Šã€`uv` ã¯ **pyproject.toml ã¨ uv.lock** ã‚’ã‚‚ã¨ã«ã€
ä¾å­˜ç’°å¢ƒã‚’å³æ™‚ã«åŒæœŸï¼ˆsyncï¼‰ã™ã‚‹ä»•çµ„ã¿ã‚’æŒã£ã¦ã„ã¾ã™ã€‚

---

### ðŸ”¹ uv sync ã®å‹•ä½œ â€” 0 ãƒ™ãƒ¼ã‚¹ã‹ã€å·®åˆ†ã‹

`uv sync` ã‚³ãƒžãƒ³ãƒ‰ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `.venv` ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã§æŒ™å‹•ãŒå¤‰ã‚ã‚Šã¾ã™ã€‚

| çŠ¶æ³                      | å‹•ä½œ                                                                                   | çµæžœ                            |
| ------------------------- | -------------------------------------------------------------------------------------- | ------------------------------- |
| `.venv` ãŒ **å­˜åœ¨ã—ãªã„** | æ–°ã—ã„ä»®æƒ³ç’°å¢ƒã‚’ä½œæˆã—ã€`uv.lock` ã«è¨˜è¼‰ã•ã‚ŒãŸã™ã¹ã¦ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« | âœ… **å®Œå…¨å†ç¾ï¼ˆ0ãƒ™ãƒ¼ã‚¹ï¼‰**      |
| `.venv` ãŒ **å­˜åœ¨ã™ã‚‹**   | æ—¢å­˜ã®ç’°å¢ƒã‚’å†åˆ©ç”¨ã—ã¤ã¤ã€`uv.lock` ã¨å·®åˆ†ã‚’å–ã£ã¦æ›´æ–°                                 | âš ï¸ **æ•´åˆæ€§ãŒå´©ã‚Œã‚‹å¯èƒ½æ€§ã‚ã‚Š** |

ã¤ã¾ã‚Šã€`.venv` ã‚’ãƒ›ã‚¹ãƒˆã‹ã‚‰ã‚³ãƒ”ãƒ¼ã—ã¦ã—ã¾ã†ã¨ã€
`uv sync` ã¯ã€Œã™ã§ã«å­˜åœ¨ã™ã‚‹ç’°å¢ƒã‚’æ›´æ–°ã™ã‚‹ã ã‘ã€ã¨åˆ¤æ–­ã—ã€
å¤ã„ãƒã‚¤ãƒŠãƒªã‚„ OS ä¾å­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãã®ã¾ã¾æ®‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®ãŸã‚ã€Docker ã®ä¸­ã§ã¯ã€Œ**.venvã‚’å«ã‚ãšã€å¸¸ã«0ã‹ã‚‰syncã™ã‚‹**ã€ã®ãŒå†ç¾æ€§ã®éµã§ã™ã€‚

---

### ðŸ”¹ pyproject.toml ã¨ uv.lock ã®é–¢ä¿‚

`uv` ã®ä¾å­˜ç®¡ç†æ§‹é€ ã¯ã€Node.js ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã¨éžå¸¸ã«ä¼¼ã¦ã„ã¾ã™ã€‚

| Python (uv)      | Node.js (pnpm/npm/yarn)                | å½¹å‰²                           |
| ---------------- | -------------------------------------- | ------------------------------ |
| `pyproject.toml` | `package.json`                         | ä¾å­˜é–¢ä¿‚ã®å®£è¨€ï¼ˆäººãŒç·¨é›†ã™ã‚‹ï¼‰ |
| `uv.lock`        | `pnpm-lock.yaml` / `package-lock.json` | ä¾å­˜é–¢ä¿‚ã®å›ºå®šï¼ˆãƒžã‚·ãƒ³ãŒç”Ÿæˆï¼‰ |

ã¤ã¾ã‚Š `uv.lock` ãŒå­˜åœ¨ã™ã‚Œã°ã€`.venv` ãŒãªãã¦ã‚‚
**åŒä¸€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒ»åŒä¸€ä¾å­˜æ§‹æˆã®ç’°å¢ƒã‚’100%å†ç¾**ã§ãã¾ã™ã€‚

```bash
# å®Œå…¨å†ç¾æ§‹ç¯‰ï¼ˆDockerfileå†…ãªã©ã§ï¼‰
uv sync --frozen
```

`--frozen` ã¯ã€ã€Œ`uv.lock` ã«è¨˜è¼‰ã•ã‚Œã¦ã„ãªã„å¤‰æ›´ã‚’ä¸€åˆ‡è¨±å¯ã—ãªã„ã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™ã€‚
ã“ã‚Œã«ã‚ˆã‚Šã€CI/CD ã‚„ Docker ãƒ“ãƒ«ãƒ‰æ™‚ã«é–‹ç™ºç’°å¢ƒã¨ã®å·®ç•°ã‚’é˜²ã’ã¾ã™ã€‚

---

### ðŸ”¹ ãªãœ uv ãªã‚‰ .venv ã‚’æ¨ã¦ã¦ã‚‚ã„ã„ã®ã‹

å¾“æ¥ã® `pip install -r requirements.txt` ã§ã¯ã€
ä¾å­˜é–¢ä¿‚ã®è§£æ±ºãŒå®Ÿè¡Œç’°å¢ƒã”ã¨ã«å¾®å¦™ã«ç•°ãªã‚Šã€
å†ç¾æ€§ã‚’ä¿è¨¼ã™ã‚‹ã®ãŒé›£ã—ã„å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚

`uv` ã¯ä¾å­˜ãƒ„ãƒªãƒ¼ã‚’å®Œå…¨ã«å›ºå®šã—ãŸçŠ¶æ…‹ã§ `.venv` ã‚’ç”Ÿæˆã™ã‚‹ãŸã‚ã€
**ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãŸã³ã«åŒã˜ç’°å¢ƒãŒå†ç¾ã•ã‚Œã‚‹**ã‚ˆã†è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚
ãã®ãŸã‚ã€`.venv` ã‚’ Docker ã«å«ã‚ã‚‹å¿…è¦ã¯ã¾ã£ãŸãã‚ã‚Šã¾ã›ã‚“ã€‚

---

### âœ… ã¾ã¨ã‚

- `.venv` ãŒãªã„å ´åˆã¯ **0ãƒ™ãƒ¼ã‚¹ã§ã‚¯ãƒªãƒ¼ãƒ³æ§‹ç¯‰**
- `.venv` ãŒã‚ã‚‹å ´åˆã¯ **å·®åˆ†åŒæœŸ** ã¨ãªã‚Šå†ç¾æ€§ã‚’æãªã†å¯èƒ½æ€§ã‚ã‚Š
- `pyproject.toml` ï¼‹ `uv.lock` ãŒã‚ã‚Œã°ã€ç’°å¢ƒã‚’å®Œå…¨ã«å†ç¾å¯èƒ½
- `uv sync --frozen` ã¯ CI/CD ã‚„ Docker ã§ã®å†ç¾æ€§ç¢ºä¿ã«å¿…é ˆ

---

äº†è§£ã€‚ã“ã“ã¯ã€Œç†è«–ã‹ã‚‰å®Ÿè£…ã¸ã€ã¤ãªãç« ã ã­ã€‚
ç«  3 ã§ã€Œãªãœ `.venv` ã‚’æ¨ã¦ã‚‹ã®ã‹ã€ãŒæ˜Žç¢ºã«ãªã£ãŸã®ã§ã€ã“ã“ã§ã¯
ã€Œã©ã†ã‚„ã£ã¦ãã‚Œã‚’Dockerã§å®Ÿç¾ã™ã‚‹ã‹ã€ã‚’ã€**æ®µéšŽçš„ã«ï¼‹å®Ÿç”¨çš„ã«**ã¾ã¨ã‚ã‚‹ðŸ‘‡

---

## 4. å®Ÿéš›ã® Docker æ§‹æˆä¾‹

ã“ã“ã§ã¯ã€å®Ÿéš›ã« **Python + uv + Docker** ã‚’ä½¿ã£ã¦
ã€Œãƒ›ã‚¹ãƒˆã¨åˆ†é›¢ã•ã‚ŒãŸå†ç¾æ€§ã®ã‚ã‚‹ç’°å¢ƒã€ã‚’æ§‹ç¯‰ã™ã‚‹ä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

---

### ðŸ”¹ 4.1 æœ€å°æ§‹æˆã® Dockerfile.dev

ã¾ãšã¯æœ€å°é™ã®æ§‹æˆã‹ã‚‰è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

```dockerfile
# ./deploy/backend/Dockerfile.dev
FROM python:3.13-slim

# Pythonè¨­å®šï¼ˆ.pycã‚’ä½œã‚‰ãªã„ãƒ»ãƒãƒƒãƒ•ã‚¡ç„¡åŠ¹ï¼‰
ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

WORKDIR /app

# uvã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
RUN pip install --no-cache-dir uv

# ä¾å­˜é–¢ä¿‚ã®åŒæœŸï¼ˆã¾ãšpyproject.tomlã¨uv.lockã ã‘ã‚’ã‚³ãƒ”ãƒ¼ï¼‰
COPY backend/pyproject.toml backend/uv.lock* ./
RUN apt-get update && apt-get install -y --no-install-recommends pkg-config libmariadb-dev libmariadb-dev-compat build-essential \
    && rm -rf /var/lib/apt/lists/*
RUN uv sync --frozen  # ã“ã“ã§.venvãŒç”Ÿæˆã•ã‚Œã‚‹

# ã‚¢ãƒ—ãƒªæœ¬ä½“ã‚’ã‚³ãƒ”ãƒ¼
COPY backend/ .

CMD ["uv", "run", "python", "manage.py", "runserver", "0.0.0.0:8000"]
```

### âœ… è§£èª¬

- `COPY backend/pyproject.toml backend/uv.lock* ./`
  â†’ ä¾å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’å…ˆã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰æ›´æ–°æ™‚ã«ä¾å­˜å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é¿ã‘ã‚‹ã€‚
- `uv sync --frozen`
  â†’ `.venv` ãŒå­˜åœ¨ã—ãªã‘ã‚Œã°æ–°è¦ä½œæˆã€ã‚ã‚Œã°å·®åˆ†æ›´æ–°ã€‚
  Docker ãƒ“ãƒ«ãƒ‰ã§ã¯æ¯Žå›žæ–°ã—ã„ã‚¤ãƒ¡ãƒ¼ã‚¸ä¸Šã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€**å¸¸ã«0ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰**ã€‚
- `.dockerignore` ã« `.venv` ã‚’å«ã‚ã¦ãŠãã“ã¨ã§ã€
  ãƒ›ã‚¹ãƒˆã«ã‚ã‚‹æ—¢å­˜ `.venv` ãŒèª¤ã£ã¦ãƒ“ãƒ«ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å«ã¾ã‚Œã‚‹ã®ã‚’é˜²ãã€‚

---

### ðŸ”¹ 4.2 .dockerignore ã®æ­£ã—ã„æ›¸ãæ–¹

```bash
# .dockerignore
backend/.venv
frontend/node_modules
.git
.DS_Store
```

ã“ã‚Œã§ãƒ›ã‚¹ãƒˆä¸Šã® `.venv` ã‚’ã‚¤ãƒ¡ãƒ¼ã‚¸ã«å«ã‚ã‚‹ãƒªã‚¹ã‚¯ã‚’å®Œå…¨ã«æŽ’é™¤ã§ãã¾ã™ã€‚
ï¼ˆ`.git` ã‚’é™¤å¤–ã—ã¦ãŠãã®ã‚‚ä¸€èˆ¬çš„ã§ã™ã€‚ï¼‰

---

### ðŸ”¹ 4.3 docker-compose.dev.yml ã® volume è¨­è¨ˆ

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®æ§‹æˆã¨æ¯”è¼ƒã—ã¦ã€Python å´ã§ã‚‚åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§
ãƒ›ã‚¹ãƒˆã® `.venv` ãŒãƒžã‚¦ãƒ³ãƒˆã•ã‚Œãªã„ã‚ˆã†ã«ã§ãã¾ã™ã€‚

```yaml
services:
  backend:
    build:
      context: ..
      dockerfile: deploy/backend/Dockerfile.dev
    volumes:
      - ../backend:/app
      - /app/__pycache__ # ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ±šæŸ“é˜²æ­¢
      - /app/.venv # â† åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã§ãƒ›ã‚¹ãƒˆã¨åˆ‡ã‚Šé›¢ã™
    env_file:
      - .env.dev
    ports:
      - "8000:8000"
```

> ðŸ’¡ ã“ã“ã§ `/app/.venv` ã‚’åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã«ã™ã‚‹ã¨ã€
> `../backend` ã®ãƒã‚¤ãƒ³ãƒ‰ãƒžã‚¦ãƒ³ãƒˆãŒ `.venv` ã‚’ä¸Šæ›¸ãã§ããªããªã‚Šã€
> ã‚³ãƒ³ãƒ†ãƒŠå°‚ç”¨ã®ä»®æƒ³ç’°å¢ƒãŒç¶­æŒã•ã‚Œã¾ã™ã€‚

---

### ðŸ”¹ 4.4 COPY é †åºã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

Dockerfile ã® COPY é †åºã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹çŽ‡ã¨å†ç¾æ€§ã«ç›´çµã—ã¾ã™ã€‚

| ã‚¹ãƒ†ãƒƒãƒ— | å†…å®¹                                 | ç†ç”±                         |
| -------- | ------------------------------------ | ---------------------------- |
| 1ï¸âƒ£       | `pyproject.toml`, `uv.lock` ã‚’ã‚³ãƒ”ãƒ¼ | ä¾å­˜é–¢ä¿‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æœ‰åŠ¹åŒ–   |
| 2ï¸âƒ£       | `uv sync --frozen`                   | .venv æ§‹ç¯‰                   |
| 3ï¸âƒ£       | ã‚¢ãƒ—ãƒªã‚³ãƒ¼ãƒ‰å…¨ä½“ã‚’ã‚³ãƒ”ãƒ¼             | ã‚³ãƒ¼ãƒ‰æ›´æ–°ã®ã¿ã§å†ãƒ“ãƒ«ãƒ‰å¯èƒ½ |

ã“ã®é †åºã‚’å®ˆã‚‹ã“ã¨ã§ã€`pip install` ã«æ¯”ã¹ã¦åœ§å€’çš„ã«é€Ÿã„ãƒ“ãƒ«ãƒ‰ãŒå®Ÿç¾ã§ãã¾ã™ã€‚

---

### âœ… ã¾ã¨ã‚

- `.venv` ã¯ **ãƒ“ãƒ«ãƒ‰æ™‚ã« uv ãŒä½œã‚‹ã‚‚ã®**ã€ãƒ›ã‚¹ãƒˆã‹ã‚‰ã‚³ãƒ”ãƒ¼ã—ãªã„
- `.dockerignore` ã§ãƒ›ã‚¹ãƒˆã® `.venv` ã‚’é™¤å¤–ã—ã¦ãŠãã®ãŒæœ€ã‚‚ç¢ºå®Ÿ
- åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ  `/app/.venv` ã‚’ä½¿ã†ã¨ã€ãƒ›ã‚¹ãƒˆã¨ã®è¡çªã‚’å®Œå…¨ã«é˜²ã’ã‚‹
- COPY é †åºã‚’æ•´ç†ã™ã‚Œã°ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹çŽ‡ã‚‚è‰¯ããªã‚‹

---

## 5. ã‚ˆãã‚ã‚‹èª¤è§£ã¨ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³

Python Ã— Docker ã®ç’°å¢ƒæ§‹ç¯‰ã§ `.venv` ã‚’æ‰±ã†éš›ã€å®Ÿå‹™ã§é »ç™ºã™ã‚‹èª¤è§£ã‚’æ•´ç†ã—ã¾ã™ã€‚
ã©ã‚Œã‚‚ä¸€è¦‹ã€Œå‹•ã„ã¦ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã€ãŸã‚åŽ„ä»‹ã§ã™ãŒã€å†ç¾æ€§ã‚„ãƒãƒ¼ãƒ é–‹ç™ºã§å•é¡Œã‚’å¼•ãèµ·ã“ã™å…¸åž‹ä¾‹ã§ã™ã€‚

---

### ðŸ§© èª¤è§£â‘ ï¼šã€ŒåŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã«ã™ã‚Œã°å®‰å…¨ã§ã—ã‚‡ï¼Ÿã€

åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã‚’æŒ‡å®šã™ã‚Œã°ã€ç¢ºã‹ã«å®Ÿè¡Œæ™‚ã«ãƒ›ã‚¹ãƒˆã® `.venv` ãŒãƒžã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã®ã‚’é˜²ã’ã¾ã™ã€‚
ã—ã‹ã—ã€**Dockerfile å†…ã§ `COPY backend/ .` ã‚’ã—ã¦ã„ã‚‹å ´åˆã€ãƒ“ãƒ«ãƒ‰æ™‚ç‚¹ã§ `.venv` ãŒå«ã¾ã‚Œã¦ã—ã¾ã†** ãŸã‚æ„å‘³ãŒã‚ã‚Šã¾ã›ã‚“ã€‚
ã“ã‚Œã¯åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ãŒ â€œã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚â€ ã«é©ç”¨ã•ã‚Œã‚‹ä»•çµ„ã¿ã ã‹ã‚‰ã§ã™ã€‚

ðŸ‘‰ **è§£æ±ºç­–:**
`.dockerignore` ã« `backend/.venv` ã‚’è¿½åŠ ã—ã€**ãƒ“ãƒ«ãƒ‰ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ**ã‹ã‚‰é™¤å¤–ã™ã‚‹ã€‚

---

### ðŸ§© èª¤è§£â‘¡ï¼šã€Œuv sync ã™ã‚Œã°ä¸Šæ›¸ãã•ã‚Œã‚‹ã§ã—ã‚‡ï¼Ÿã€

`uv sync` ã¯ä¾å­˜é–¢ä¿‚ã‚’åŒæœŸã™ã‚‹ã‚³ãƒžãƒ³ãƒ‰ã§ã™ãŒã€**0ãƒ™ãƒ¼ã‚¹ã§å†æ§‹ç¯‰ã™ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚**
æ—¢å­˜ã® `.venv` ãŒã‚ã‚‹å ´åˆã€ãã®ç’°å¢ƒã‚’ã€Œæ›´æ–°ã€ã—ã¦ã—ã¾ã†ãŸã‚ã€**ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã§ç•°ãªã‚‹ä¾å­˜é–¢ä¿‚ãŒæ··ã–ã‚‹å¯èƒ½æ€§**ãŒã‚ã‚Šã¾ã™ã€‚

ðŸ‘‰ **è§£æ±ºç­–:**
`.venv` ã¯ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã§å…±æœ‰ã—ãªã„ã€‚
å¸¸ã« `.dockerignore` ã§é™¤å¤–ã—ã€`uv sync --frozen` ã§ lock ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚‚ã¨ã«ã‚¯ãƒªãƒ¼ãƒ³æ§‹ç¯‰ã€‚

---

### ðŸ§© èª¤è§£â‘¢ï¼šã€Œãƒ›ã‚¹ãƒˆã® .venv ã‚’å…±æœ‰ã™ã‚Œã°é€Ÿã„ã€

ç¢ºã‹ã«ãƒ“ãƒ«ãƒ‰ã‚„èµ·å‹•ã¯é€Ÿããªã‚Šã¾ã™ãŒã€**OSä¾å­˜ãƒã‚¤ãƒŠãƒªï¼ˆä¾‹ï¼šCæ‹¡å¼µï¼‰**ãŒå…¥ã£ã¦ã„ã‚‹ãŸã‚å±é™ºã§ã™ã€‚
macOS ä¸Šã§ä½œã£ãŸ `.venv` ã‚’ Linux ã‚³ãƒ³ãƒ†ãƒŠã«ãƒžã‚¦ãƒ³ãƒˆã™ã‚‹ã¨ã€
ã€Œã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼ã€ã‚„ã€Œå…±æœ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¦‹ã¤ã‹ã‚‰ãªã„ã€ãªã©ã®ä¸å…·åˆãŒç™ºç”Ÿã—ã¾ã™ã€‚

ðŸ‘‰ **è§£æ±ºç­–:**
ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã¯åˆ¥ã® `.venv` ã‚’æŒã¤ã®ãŒåŽŸå‰‡ã€‚
ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å†ç¾æ€§ã¯ `uv.lock` ã«ä»»ã›ã‚‹ã€‚

---

### ðŸ§© èª¤è§£â‘£ï¼šã€ŒNode.js ã§ã¯å‹•ã„ã¦ã‚‹ã‹ã‚‰åŒã˜ã§ã—ã‚‡ï¼Ÿã€

Node.js ã® `node_modules` ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ä¾å­˜ãŒå°‘ãªãã€**`pnpm install` ã¯å¸¸ã«0ãƒ™ãƒ¼ã‚¹ã§æ§‹ç¯‰**ã•ã‚Œã¾ã™ã€‚
ä¸€æ–¹ã§ Python ã® `.venv` ã¯ OSãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä¾å­˜ã§ã‚ã‚Šã€**ãƒ›ã‚¹ãƒˆç’°å¢ƒã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã¨ç ´ç¶»ã—ã¾ã™ã€‚**

ðŸ‘‰ **è§£æ±ºç­–:**
Node.js ã¨ Python ã®ç’°å¢ƒå†ç¾ãƒ¢ãƒ‡ãƒ«ã¯ç•°ãªã‚‹ã€‚
Pythonã§ã¯ã€Œ.venvã¯æŽ’é™¤ãƒ»å†æ§‹ç¯‰ã€ã€Nodeã§ã¯ã€Œnode_modulesã‚’åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã§å†ç”Ÿæˆã€ã€‚

---

### ðŸ§© èª¤è§£â‘¤ï¼šã€Œ.dockerignore ã„ã‚‰ãªã„ã§ã—ã‚‡ï¼Ÿã€

`.dockerignore` ã‚’ä½¿ã‚ãªãã¦ã‚‚å‹•ãã‚ˆã†ã«è¦‹ãˆã‚‹ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ãŒã€
**å‹•ã â‰  å†ç¾æ€§ãŒä¿è¨¼ã•ã‚Œã¦ã„ã‚‹** ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
ãƒ›ã‚¹ãƒˆã®ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ`.venv`, `__pycache__`, `.DS_Store`ãªã©ï¼‰ã¯ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ±šæŸ“ã—ã€
åˆ¥ãƒžã‚·ãƒ³ã§åŒã˜Dockerfileã‚’ä½¿ã£ã¦ã‚‚åŒä¸€ã®ç’°å¢ƒã«ãªã‚‰ãªã„ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚

ðŸ‘‰ **è§£æ±ºç­–:**
`.gitignore` ã¨ã¯åˆ¥ã«ã€**Dockerå°‚ç”¨ã®é™¤å¤–ãƒ«ãƒ¼ãƒ«**ã‚’å¿…ãšè¨­å®šã™ã‚‹ã€‚
ç‰¹ã« `.venv`, `.mypy_cache`, `.pytest_cache` ãªã©ã¯å¿…é ˆé™¤å¤–é …ç›®ã€‚

---

### âœ… ã¾ã¨ã‚

| èª¤è§£                  | å•é¡Œç‚¹             | è§£æ±ºç­–                 |
| --------------------- | ------------------ | ---------------------- |
| åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã§OK    | ãƒ“ãƒ«ãƒ‰æ™‚ã«æ··å…¥     | `.dockerignore` ã§é™¤å¤– |
| uv syncã§ä¸Šæ›¸ãã•ã‚Œã‚‹ | å·®åˆ†æ›´æ–°ã•ã‚Œã‚‹     | `uv sync --frozen`     |
| ãƒ›ã‚¹ãƒˆã®.venvå…±æœ‰     | OSéžäº’æ›           | åˆ†é›¢ãƒ»å†æ§‹ç¯‰           |
| Node.jsã¨åŒã˜æ§‹æˆ     | å‹•ä½œãƒ¢ãƒ‡ãƒ«ãŒç•°ãªã‚‹ | Pythonå°‚ç”¨è¨­è¨ˆ         |
| .dockerignoreä¸è¦     | å†ç¾æ€§ä½Žä¸‹         | å¿…ãšè¨­å®š               |

---

ã„ã„ç· ã‚ã«ã„ã“ã†ã€‚
ã“ã®ç« ã¯ â€œæŠ€è¡“çš„ãªçµè«–â€ ã ã‘ã˜ã‚ƒãªãã€**è€ƒãˆæ–¹ã®æŒ‡é‡**ã¨ã—ã¦çµ‚ã‚ã‚Œã‚‹ã¨èª­å¾Œæ„ŸãŒå¼·ãæ®‹ã‚‹ã€‚
ä»¥ä¸‹ã®ã‚ˆã†ã«ã¾ã¨ã‚ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆðŸ‘‡

---

## 7. ã¾ã¨ã‚

ä»Šå›žæ‰±ã£ãŸã®ã¯ã€å˜ãªã‚‹ `.venv` ã®é™¤å¤–è¨­å®šã§ã¯ãªãã€
**ã€ŒPython Ã— Docker ã«ãŠã‘ã‚‹ç’°å¢ƒå†ç¾æ€§ã®æœ¬è³ªã€** ã§ã™ã€‚

---

### ðŸ§© å•é¡Œã®æœ¬è³ª

- `.venv` ã«ã¯ **OSä¾å­˜ã®ãƒã‚¤ãƒŠãƒªã‚„ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯** ãŒå«ã¾ã‚Œã‚‹ãŸã‚ã€
  ãƒ›ã‚¹ãƒˆã¨ã‚³ãƒ³ãƒ†ãƒŠã§å…±æœ‰ã™ã‚‹ã¨ **ç’°å¢ƒã®æ•´åˆæ€§ãŒå£Šã‚Œã‚‹**ã€‚
- `uv sync` ã¯æ—¢å­˜ã® `.venv` ã‚’éƒ¨åˆ†çš„ã«æ›´æ–°ã™ã‚‹ä»•çµ„ã¿ã®ãŸã‚ã€
  **ã‚¯ãƒªãƒ¼ãƒ³ãªçŠ¶æ…‹ã‹ã‚‰æ§‹ç¯‰ã—ãªã„é™ã‚Šå®Œå…¨å†ç¾ã«ã¯ãªã‚‰ãªã„**ã€‚

---

### ðŸ§° è§£æ±ºç­–ã®è¦ç‚¹

| å±¤           | æ–¹é‡                                      | ç†ç”±                         |
| ------------ | ----------------------------------------- | ---------------------------- |
| **ãƒ“ãƒ«ãƒ‰æ™‚** | `.dockerignore` ã« `backend/.venv` ã‚’è¿½åŠ  | ãƒ›ã‚¹ãƒˆã® `.venv` æ··å…¥ã‚’é˜²æ­¢  |
| **å®Ÿè¡Œæ™‚**   | åŒ¿åãƒœãƒªãƒ¥ãƒ¼ãƒ ã§ `.venv` ã‚’åˆ‡ã‚Šé›¢ã™       | ãƒžã‚¦ãƒ³ãƒˆè¡çªã‚’é˜²æ­¢           |
| **ç’°å¢ƒå†ç¾** | `uv sync --frozen`                        | `uv.lock` ã«åŸºã¥ã„ã¦å®Œå…¨åŒæœŸ |
| **é–‹ç™ºåŠ¹çŽ‡** | VSCodeã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«`.venv`ã‚’åˆ©ç”¨           | Lintã‚„è£œå®Œã¯ãƒ­ãƒ¼ã‚«ãƒ«å®Œçµã§OK |

---

### ðŸ’¡ å­¦ã¹ã‚‹æ•™è¨“

1. **ã€Œå‹•ãã€ã“ã¨ã‚ˆã‚Šã€Œå†ç¾ã§ãã‚‹ã€ã“ã¨ãŒé‡è¦ã€‚**
   ãƒãƒ¼ãƒ é–‹ç™ºã‚„CI/CDã§ã¯ã€åŒã˜Dockerfileã‹ã‚‰åŒã˜ç’°å¢ƒãŒå†ç¾ã§ãã‚‹ã“ã¨ãŒæœ€å„ªå…ˆã€‚

2. **Pythonã¯Node.jsã‚ˆã‚Šã‚‚ç’°å¢ƒå·®ã®å½±éŸ¿ãŒå¤§ãã„ã€‚**
   Nodeã§ã¯ä¾å­˜ãŒç´”ç²‹ã«JavaScriptã§å®Œçµã™ã‚‹ãŒã€
   Pythonã¯ãƒã‚¤ãƒ†ã‚£ãƒ–ä¾å­˜ï¼ˆC, glibc, etc.ï¼‰ã‚’å¤šãå«ã‚€ãŸã‚æ…Žé‡ãªåˆ†é›¢ãŒå¿…è¦ã€‚

3. **`.dockerignore` ã¯â€œå®‰å…¨å¼â€ã§ã‚ã‚Šã€å†ç¾æ€§ã®æœ€å¾Œã®ç ¦ã€‚**
   ã€Œå‹•ãã‹ã‚‰ã„ã„ã€ã§ã¯ãªãã€Œä»–ã®ç’°å¢ƒã§ã‚‚ç¢ºå®Ÿã«å‹•ãã‹ã€ã§åˆ¤æ–­ã™ã‚‹ã€‚

---

### ðŸš€ çµè«–

> `.venv` ã¯ã‚³ãƒ³ãƒ†ãƒŠã«å«ã‚ãªã„ã€‚
> `uv.lock` ã¨ `uv sync --frozen` ã§å†ç¾ã™ã‚‹ã€‚
> `.dockerignore` ã¯å¿…ãšè¨­å®šã™ã‚‹ã€‚

ã“ã‚ŒãŒã€**Python Ã— Docker Ã— uv ã®æœ€å°æ§‹æˆã§å†ç¾æ€§ã‚’æ‹…ä¿ã™ã‚‹æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«ãªè§£** ã§ã™ã€‚

äº†è§£ âœ…
ä»¥ä¸‹ã¯ã€TechBlog v2 ç”¨ã«ãã®ã¾ã¾ã‚³ãƒ”ãƒšã§ãã‚‹ **Markdown ãƒ•ãƒƒã‚¿ãƒ¼** å½¢å¼ã®å®Œæˆç‰ˆã§ã™ã€‚
ã™ã¹ã¦ä¸€æ¬¡æƒ…å ±ã®è‹±èªžåŽŸæ–‡ï¼‹æ—¥æœ¬èªžè¨³ï¼‹å…¬å¼ãƒªãƒ³ã‚¯ä»˜ãã§ã™ã€‚

---

## ðŸ“š å‚è€ƒæ–‡çŒ®ãƒ»ã‚½ãƒ¼ã‚¹

### ðŸ§© **uv é–¢é€£ï¼ˆAstral Docsï¼‰**

> â€œIf the project virtual environment (`.venv`) does not exist, it will be created.â€
> â€œUpdate the project's environment.â€
> â€œSyncing ensures that all project dependencies are installed and up-to-date with the lockfile.â€
> ï¼ˆ`.venv` ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯æ–°è¦ä½œæˆã•ã‚Œã€å­˜åœ¨ã™ã‚‹å ´åˆã¯æ›´æ–°ã•ã‚Œã‚‹ã€‚ãƒ­ãƒƒã‚¯ãƒ•ã‚¡ã‚¤ãƒ«ã«åŸºã¥ãä¾å­˜é–¢ä¿‚ã‚’æœ€æ–°åŒ–ã™ã‚‹ã€‚ï¼‰
>
> â€” [Astral Docs: uv â€“ Projects / uv sync](https://docs.astral.sh/uv/reference/commands/#uv-sync)

---

### ðŸ³ **Docker Ã— Python ç’°å¢ƒè¨­è¨ˆ**

> â€œAvoid copying virtual environments from your local machine into Docker images.â€
> ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ã®ä»®æƒ³ç’°å¢ƒã‚’ Docker ã‚¤ãƒ¡ãƒ¼ã‚¸ã«ã‚³ãƒ”ãƒ¼ã—ãªã„ã“ã¨ã€‚ï¼‰
>
> â€” [Docker Official Docs â€“ Language Guide (Python)](https://docs.docker.com/language/python/build-images/)

> â€œTo exclude files not relevant to the build, without restructuring your source repository, use a `.dockerignore` file.â€
> ï¼ˆãƒ“ãƒ«ãƒ‰ã«ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’é™¤å¤–ã™ã‚‹ã«ã¯ `.dockerignore` ã‚’ä½¿ç”¨ã™ã‚‹ã€‚ï¼‰
>
> â€” [Docker Docs â€“ `.dockerignore`](https://docs.docker.com/engine/reference/builder/#dockerignore-file)

---

### ðŸ **Python å…¬å¼ â€“ venv ã®ç§»æ¤æ€§ã«ã¤ã„ã¦**

> â€œBecause of this, environments are inherently non-portable, in the general case.â€
> ï¼ˆã“ã®ãŸã‚ä»®æƒ³ç’°å¢ƒã¯æœ¬è³ªçš„ã«ãƒãƒ¼ã‚¿ãƒ–ãƒ«ã§ã¯ãªã„ã€‚ï¼‰
>
> â€” [Python Docs â€“ venv (3.13)](https://docs.python.org/3/library/venv.html)

---

### ðŸ’½ **Docker â€“ Volume ã¨ Bind Mount ã®é•ã„**

> â€œWhen you use a bind mount, a file or directory on the host machine is mounted from the host into a container.â€
> ï¼ˆãƒã‚¤ãƒ³ãƒ‰ãƒžã‚¦ãƒ³ãƒˆã§ã¯ãƒ›ã‚¹ãƒˆä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ãã®ã¾ã¾ã‚³ãƒ³ãƒ†ãƒŠã¸ãƒžã‚¦ãƒ³ãƒˆã™ã‚‹ã€‚ï¼‰
>
> â€œWhile bind mounts are dependent on the directory structure and OS of the host machine, volumes are completely managed by Docker.â€
> ï¼ˆãƒã‚¤ãƒ³ãƒ‰ãƒžã‚¦ãƒ³ãƒˆã¯ãƒ›ã‚¹ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚„ OS ã«ä¾å­˜ã™ã‚‹ãŒã€ãƒœãƒªãƒ¥ãƒ¼ãƒ ã¯ Docker ã«ã‚ˆã£ã¦å®Œå…¨ã«ç®¡ç†ã•ã‚Œã‚‹ã€‚ï¼‰
>
> â€” [Docker Docs â€“ Use bind mounts or volumes](https://docs.docker.com/storage/volumes/)

---

### ðŸ§± **Node.js Lockfile ã®å†ç¾æ€§**

> â€œIt describes the exact tree that was generated, such that subsequent installs are able to generate identical trees, regardless of intermediate dependency updates.â€
> ï¼ˆ`package-lock.json` ã¯ç”Ÿæˆã•ã‚ŒãŸä¾å­˜ãƒ„ãƒªãƒ¼ã‚’åŽ³å¯†ã«è¨˜è¿°ã—ã€å¾Œã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§åŒä¸€ãƒ„ãƒªãƒ¼ã‚’å†ç¾ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚ï¼‰
>
> â€” [npm Docs â€“ About package-lock.json](https://docs.npmjs.com/cli/v9/configuring-npm/package-lock-json)

> â€œCommit the lockfile (`pnpm-lock.yaml`) for faster installs and consistent installations.â€
> ï¼ˆ`pnpm-lock.yaml` ã‚’ã‚³ãƒŸãƒƒãƒˆã™ã‚‹ã“ã¨ã§ã€ã‚ˆã‚Šé«˜é€Ÿã‹ã¤ä¸€è²«ã—ãŸã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¯èƒ½ã«ãªã‚‹ã€‚ï¼‰
>
> â€” [pnpm Docs â€“ Lockfile](https://pnpm.io/lockfile)
